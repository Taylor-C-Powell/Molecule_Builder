"""Mapping between MolBuilder template named_reaction values and ORD keys.

TEMPLATE_TO_ORD_KEY maps ``ReactionTemplate.named_reaction`` strings to the
snake_case keys used in ``ord_conditions.json``.

CATEGORY_FALLBACK provides a fallback ORD key for templates whose
``named_reaction`` has no direct match in the ORD data.
"""

from __future__ import annotations

# Maps ReactionTemplate.named_reaction -> ord_conditions.json key.
# Only the canonical named_reaction string is needed; duplicates
# (e.g. multiple templates sharing "Grignard reaction") share a key.
TEMPLATE_TO_ORD_KEY: dict[str, str] = {
    # --- Substitution ---
    "SN2": "sn2_substitution",
    "SN2 cyanide displacement": "sn2_substitution",
    "SN2 azide displacement": "sn2_substitution",
    "SN1": "sn1_substitution",
    "SN2 (bulky base can give elimination side products)": "sn2_substitution",
    "Gabriel synthesis": "gabriel_synthesis",
    "Finkelstein reaction": "finkelstein_reaction",
    "Mitsunobu reaction": "mitsunobu_reaction",
    "Williamson ether synthesis": "williamson_ether_synthesis",
    "N-Alkylation": "n_alkylation",
    "N-Alkylation (DMS)": "n_alkylation",
    "N-methylation": "n_methylation",
    "Friedel-Crafts alkylation": "friedel_crafts_alkylation",
    "Friedel-Crafts acylation": "friedel_crafts_acylation",
    "Vilsmeier-Haack reaction": "vilsmeier_haack_reaction",
    "Sandmeyer reaction": "sandmeyer_reaction",
    "Kolbe-Schmitt reaction": "kolbe_schmitt_reaction",
    "Duff reaction": "duff_reaction",
    "Gattermann-Koch reaction": "gattermann_koch_reaction",
    "Birch alkylation": "birch_alkylation",
    "Balz-Schiemann reaction": "balz_schiemann_reaction",
    "Reimer-Tiemann reaction": "reimer_tiemann_reaction",
    "Schiemann reaction": "balz_schiemann_reaction",
    # --- Elimination ---
    "E2": "e2_elimination",
    "E1 dehydration": "e1_elimination",
    "Hofmann elimination": "hofmann_elimination",
    "Cope elimination": "cope_elimination",
    "E2 dehydrohalogenation": "e2_elimination",
    "E2 selectivity": "e2_elimination",
    "Shapiro reaction": "shapiro_reaction",
    "Bamford-Stevens reaction": "bamford_stevens_reaction",
    # --- Addition ---
    "Electrophilic addition": "electrophilic_addition",
    "Radical addition (anti-Markovnikov)": "radical_addition",
    "Hydroboration-oxidation": "hydroboration_oxidation",
    "Prilezhaev epoxidation": "prilezhaev_epoxidation",
    "Upjohn dihydroxylation": "upjohn_dihydroxylation",
    "Catalytic hydrogenation": "catalytic_hydrogenation",
    "Halogenation": "halogenation",
    "Acid-catalysed hydration": "acid_catalysed_hydration",
    "Ozonolysis": "ozonolysis",
    "Simmons-Smith": "simmons_smith_reaction",
    "Sharpless AD": "sharpless_dihydroxylation",
    # --- Oxidation ---
    "PCC oxidation": "pcc_oxidation",
    "Jones oxidation": "jones_oxidation",
    "Swern oxidation": "swern_oxidation",
    "Permanganate oxidation": "permanganate_oxidation",
    "Dess-Martin oxidation": "dess_martin_oxidation",
    "Baeyer-Villiger oxidation": "baeyer_villiger_oxidation",
    "Sharpless epoxidation": "sharpless_epoxidation",
    "Wacker oxidation": "wacker_oxidation",
    "TPAP oxidation": "tpap_oxidation",
    "IBX oxidation": "ibx_oxidation",
    "Pinnick oxidation": "pinnick_oxidation",
    "Riley oxidation": "riley_oxidation",
    "Dakin oxidation": "dakin_oxidation",
    "TEMPO oxidation": "tempo_oxidation",
    "Oppenauer oxidation": "oppenauer_oxidation",
    "Lemieux-Johnson oxidation": "lemieux_johnson_oxidation",
    "Jacobsen epoxidation": "jacobsen_epoxidation",
    "Shi epoxidation": "shi_epoxidation",
    "Anodic oxidation": "anodic_oxidation",
    # --- Reduction ---
    "NaBH4 reduction": "nabh4_reduction",
    "LiAlH4 reduction": "lialh4_reduction",
    "DIBAL-H partial reduction": "dibal_reduction",
    "Birch reduction": "birch_reduction",
    "Wolff-Kishner reduction": "wolff_kishner_reduction",
    "Clemmensen reduction": "clemmensen_reduction",
    "Luche reduction": "luche_reduction",
    "Asymmetric hydrogenation": "asymmetric_hydrogenation",
    "Rosenmund reduction": "rosenmund_reduction",
    "Lindlar hydrogenation": "lindlar_hydrogenation",
    "CBS reduction": "cbs_reduction",
    "Noyori asymmetric hydrogenation": "noyori_asymmetric_hydrogenation",
    "Noyori transfer hydrogenation": "noyori_transfer_hydrogenation",
    "Flow hydrogenation": "catalytic_hydrogenation",
    "Ketoreductase reduction": "ketoreductase_reduction",
    # --- Coupling ---
    "Grignard reaction": "grignard_reaction",
    "Grignard reaction (2 equiv on ester)": "grignard_reaction",
    "Grignard carboxylation": "grignard_reaction",
    "Suzuki-Miyaura coupling": "suzuki_coupling",
    "Heck reaction": "heck_coupling",
    "Sonogashira coupling": "sonogashira_coupling",
    "Wittig reaction": "wittig_olefination",
    "Horner-Wadsworth-Emmons": "horner_wadsworth_emmons",
    "Aldol reaction": "aldol_condensation",
    "Claisen condensation": "claisen_condensation",
    "Stille coupling": "stille_coupling",
    "Negishi coupling": "negishi_coupling",
    "Schotten-Baumann acylation": "schotten_baumann_acylation",
    "EDC/HOBt amide coupling": "amide_coupling",
    "Buchwald-Hartwig amination": "buchwald_hartwig_amination",
    "Chan-Lam coupling": "chan_lam_coupling",
    "Ullmann coupling": "ullmann_coupling",
    "Kumada coupling": "kumada_coupling",
    "Hiyama coupling": "hiyama_coupling",
    "Miyaura borylation": "miyaura_borylation",
    "Ir-catalysed C-H borylation": "ir_ch_borylation",
    "Suzuki coupling (alkyl)": "suzuki_coupling",
    "Tsuji-Trost reaction": "tsuji_trost_reaction",
    "Metallaphotoredox coupling": "metallaphotoredox_coupling",
    "Liebeskind-Srogl coupling": "liebeskind_srogl_coupling",
    "Cadiot-Chodkiewicz coupling": "cadiot_chodkiewicz_coupling",
    "Pd-catalysed C-H activation": "pd_ch_activation",
    "Evans aldol": "evans_aldol",
    "CuAAC (click chemistry)": "cuaac_click",
    "Photocatalytic C-H coupling": "photocatalytic_ch_coupling",
    "Ni reductive cross-coupling": "ni_reductive_coupling",
    # --- Carbonyl ---
    "Fischer esterification": "fischer_esterification",
    "Cannizzaro reaction": "cannizzaro_reaction",
    "Tischenko reaction": "tishchenko_reaction",
    "Michael addition": "michael_addition",
    "Robinson annulation": "robinson_annulation",
    "Julia-Kocienski olefination": "julia_kocienski_olefination",
    "Peterson olefination": "peterson_olefination",
    "Tebbe olefination": "tebbe_olefination",
    "Aza-Wittig reaction": "aza_wittig_reaction",
    "Knoevenagel condensation": "knoevenagel_condensation",
    "Weinreb amide": "weinreb_amide",
    "Reformatsky reaction": "reformatsky_reaction",
    "Lactamisation": "lactamisation",
    # --- Protection ---
    "Boc protection": "boc_protection",
    "Fmoc protection": "fmoc_protection",
    "TBS silylation": "tbs_protection",
    "Benzyl protection": "benzyl_protection",
    "Acetylation": "acetylation",
    "PMB protection": "pmb_protection",
    "Acetonide protection": "acetonide_protection",
    "THP protection": "thp_protection",
    # --- Deprotection ---
    "Boc deprotection": "boc_deprotection",
    "Fmoc deprotection": "fmoc_deprotection",
    "TBS removal": "tbs_deprotection",
    "Hydrogenolysis": "hydrogenolysis",
    "PMB deprotection": "pmb_deprotection",
    # --- Rearrangement ---
    "Claisen rearrangement": "claisen_rearrangement",
    "Beckmann rearrangement": "beckmann_rearrangement",
    "Cope rearrangement": "cope_rearrangement",
    "Pinacol rearrangement": "pinacol_rearrangement",
    "Curtius rearrangement": "curtius_rearrangement",
    "Hofmann rearrangement": "hofmann_rearrangement",
    "Wolff rearrangement": "wolff_rearrangement",
    "Favorskii rearrangement": "favorskii_rearrangement",
    "Fries rearrangement": "fries_rearrangement",
    "Schmidt reaction": "schmidt_reaction",
    "Overman rearrangement": "overman_rearrangement",
    # --- Pericyclic ---
    "Diels-Alder": "diels_alder",
    "Traube synthesis": "traube_synthesis",
    "Pyrimidine synthesis": "pyrimidine_synthesis",
    # --- Radical ---
    "Patern\u00f2-B\u00fcchi reaction": "paterno_buchi_reaction",
    "Minisci reaction": "minisci_reaction",
    "Barton decarboxylation": "barton_decarboxylation",
    "Norrish Type I": "norrish_type_i",
    "Norrish Type II": "norrish_type_ii",
    "Wohl-Ziegler bromination": "wohl_ziegler_bromination",
    # --- Polymerization ---
    "ROMP": "romp",
    # --- Misc ---
    "Appel reaction": "appel_reaction",
    "Staudinger reduction": "staudinger_reduction",
    "Corey-Chaykovsky reaction": "corey_chaykovsky_reaction",
    "Ring-closing metathesis (RCM)": "ring_closing_metathesis",
    "Cross-metathesis": "cross_metathesis",
    "Olefin cross-metathesis": "cross_metathesis",
    "Hantzsch pyridine synthesis": "hantzsch_pyridine_synthesis",
    "Skraup synthesis": "skraup_synthesis",
    "Doebner-Miller synthesis": "doebner_miller_synthesis",
    "Friedlander synthesis": "friedlander_synthesis",
    "Paal-Knorr pyrrole synthesis": "paal_knorr_synthesis",
    "Paal-Knorr furan synthesis": "paal_knorr_synthesis",
    "Fischer indole synthesis": "fischer_indole_synthesis",
    "Madelung indole synthesis": "madelung_indole_synthesis",
    "Leimgruber-Batcho indole synthesis": "leimgruber_batcho_synthesis",
    "Chichibabin synthesis": "chichibabin_synthesis",
    "Knorr pyrazole synthesis": "knorr_pyrazole_synthesis",
    "Gewald reaction": "gewald_reaction",
    "Combes synthesis": "combes_synthesis",
    "Strecker synthesis": "strecker_synthesis",
    "Mannich reaction": "mannich_reaction",
    "Passerini reaction": "passerini_reaction",
    "Ugi reaction": "ugi_reaction",
    "Baylis-Hillman reaction": "baylis_hillman_reaction",
    "Henry reaction": "henry_reaction",
    "Enzymatic resolution": "enzymatic_resolution",
}

# Fallback: when a template's named_reaction is not in ORD data,
# try a category-level aggregate key instead.
CATEGORY_FALLBACK: dict[str, str] = {
    "SUBSTITUTION": "substitution_general",
    "ELIMINATION": "elimination_general",
    "ADDITION": "addition_general",
    "OXIDATION": "oxidation_general",
    "REDUCTION": "reduction_general",
    "COUPLING": "cross_coupling_general",
    "CARBONYL": "carbonyl_general",
    "PROTECTION": "protection_general",
    "DEPROTECTION": "deprotection_general",
    "REARRANGEMENT": "rearrangement_general",
    "RADICAL": "radical_general",
    "PERICYCLIC": "pericyclic_general",
    "POLYMERIZATION": "polymerization_general",
    "MISC": "misc_general",
}
